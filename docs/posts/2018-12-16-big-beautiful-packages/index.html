<!DOCTYPE html>
<html lang="en-gb">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="apple-touch-icon" sizes="180x180" href="/fppixels/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/fppixels/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/fppixels/favicon-16x16.png">
	<link rel="manifest" href="/fppixels/site.webmanifest">
	<link rel="mask-icon" href="/fppixels/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/fppixels/favicon.ico">
	<title>Big Beautiful Packages</title>
	<link rel="stylesheet" href="/fppixels/css/style.min.857f4a4adceba73f2fc8a745f8ca8b08437800bdf1c3275e2c7360f4994644ba.css" integrity="sha256-hX9KStzrpz8vyKdF+MqLCEN4AL3xwydeLHNg9JlGRLo=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://davesmith00000.github.io/fppixels/">FP Pixels</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="/fppixels/posts/">Posts</a>
					<a href="/fppixels/about-fp-pixels/">About</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://twitter.com/davidjamessmith" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://github.com/davesmith00000" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast" style="display: none;">
		<ul>
			<li><a href="/fppixels/posts/">Posts</a></li>
			<li><a href="/fppixels/about-fp-pixels/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Dec 16, 2018</span></div>
				<h1>Big Beautiful Packages</h1>
			</header>
			<div class="content">
				

<h2 id="tl-dr">TL;DR:</h2>

<p>You can use package objects to alias types making your library&rsquo;s imports easier to work with, aid encapsulation, and act as an interface. Big popular libraries do this, I just hadn’t realised the benefits until recently.</p>

<h3 id="authors-note">Authors note:</h3>

<p>This post has been sitting in draft for a while. At the time I originally wrote it, I was unreasonably excited about this little trick, but you may find this underwhelming&hellip;</p>

<p>Still reading? Well don&rsquo;t say I didn&rsquo;t warn you.</p>

<h3 id="a-nicer-editor">A nicer editor</h3>

<p>It all started with a re-occuring unease I have with how we Scala developers are completely bound to Intellij IDEA. Intellij is amazing of course, but I don&rsquo;t like the non-standard Scala type checker or that it&rsquo;s our only serious choice.</p>

<p>After quite a lot of digging and experimenting with editors, configurations and plugins; I found that for simple creation and editing I actually prefer using Atom (with the SBT plugin, or Metals) to Intellij. Sadly, Atom isn&rsquo;t quite sufficient for all my day to day needs and so I’m sort of alternating between the two.</p>

<p>One problem is that while I personally preferred the code writing experience in Atom; discovery and navigation through unfamiliar / long forgotten project structures without Intellij is rather hard going. That’s not the real killer though. While navigating a local codebase may be hard, finding your way around third party libraries when your editor doesn’t understand the source code is nigh on impossible. This reduces you to doing the unthinkable: Reading the API docs. How tedious.</p>

<h3 id="where-am-i-going-with-this">Where am I going with this?</h3>

<p>One thing that’s always interested me when observing other programmers in their natural habitat, is how much their choice of text editor affects the way they construct and organise code. For example, in general I find people who use IDE’s that make navigation trivial tend to be more liberal and expressive with their package hierarchies than people editing in a terminal based text editor. I’m not saying that’s universally true, just my own observations, but it leads me to a question:</p>

<p>How could targeting users who prefer editors like Atom or VIM affect our library design, specifically the problem of figuring out what imports are needed?</p>

<h3 id="package-objects-to-the-rescue">Package Objects to the rescue!</h3>

<p>The solution I’ve come up with for Indigo is to make better use of the package object.</p>

<p>A package object basically lets you import code that’s associated with a whole package, for example, if you had a package structure like <code>myamazinglib.utils</code>, then a package object at that level would let you do something like this (&hellip;not that you would):</p>
<div class="highlight"><pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">package</span> <span class="nn">myamazinglib.utils</span> <span class="o">{</span>
  <span class="k">implicit</span> <span class="k">def</span> <span class="n">toOption</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Option</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
<span class="o">}</span></code></pre></div>
<p>Allowing for:</p>
<div class="highlight"><pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">myamazinglib.utils._</span>

<span class="k">val</span> <span class="n">maybeMessage</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="s">&#34;Hello, World!&#34;</span></code></pre></div>
<p>Not everyone’s cup of tea I’m sure, but you get the idea.</p>

<p>But I learned a thing! Another handy use for package objects is that you can set aliases. For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">package</span> <span class="nn">myamazinglib.utils</span> <span class="o">{</span>
  <span class="c1">// type only if it is just a trait / type
</span><span class="c1"></span>  <span class="k">type</span> <span class="kt">AbstractTool</span> <span class="o">=</span> <span class="n">tooling</span><span class="o">.</span><span class="nc">AbstractTool</span>

  <span class="c1">// type and val if it has members you’d like to access
</span><span class="c1"></span>  <span class="k">type</span> <span class="kt">CleverTool</span> <span class="o">=</span> <span class="n">tooling</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="nc">CleverTool</span>
  <span class="k">val</span> <span class="nc">CleverTool</span><span class="k">:</span> <span class="kt">tooling.helpers.CleverTool.</span><span class="k">type</span> <span class="o">=</span> <span class="n">tooling</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="nc">CleverTool</span>
<span class="o">}</span></code></pre></div>
<p>And that means you can write code like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">myamazinglib.utils._</span>

<span class="k">val</span> <span class="n">tool</span><span class="k">:</span> <span class="kt">CleverTool</span> <span class="o">=</span> <span class="nc">CleverTool</span><span class="o">(...)</span></code></pre></div>
<p>Without having to know the entire path to the class! Much better!</p>

<p>But that’s not all: Your packages are now acting like an interface, so if your code moves behind the scenes your users won’t necessarily notice, and you only need to expose the types that people really need via the package object.</p>

<p>Neat! Underwhelming &hellip;but neat!</p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>595 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-12-16 00:00 &#43;0000</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://davesmith00000.github.io/fppixels/posts/2018-12-23-games-without-effects/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Building Games Without Effects</span>
			</a>
			<a class="prev-post" href="https://davesmith00000.github.io/fppixels/posts/2018-11-30-devlog-1/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Scala Game Devlog 1</span>
			</a>
		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2018 <a href="https://davesmith00000.github.io/fppixels/">Dave Smith</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://davesmith00000.github.io/fppixels/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></p>
	</footer>

	<script>let haveHeader = true;</script>

	<script src="/fppixels/js/main.min.00689ba18bbf9422fda222b02b555f01d54bfbb9b6d02f9bcffad67bdb2ff2cd.js" integrity="sha256-AGiboYu/lCL9oiKwK1VfAdVL+7m20C+bz/rWe9sv8s0="></script>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-129418446-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
